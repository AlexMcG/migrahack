
		<script type="text/javascript" src="/assets/js/jquery.js"></script>
		<script type="text/javascript" src="/assets/js/tem.js"></script>
		<script type="text/javascript" src="/assets/js/highcharts.js"></script>
		<script type="text/javascript" src="/assets/js/modules/exporting.js"></script>
		<script type="text/javascript">
                    function showStats(regName, year)
                    {
                        /*
                            Overall Statistics:
                            ---------------------
                            Total Number Of Residence Apporvals Since 2001:     X
                            Year 1:     X
                            Year 2:     X
                            Year N:     X
                    
                            Top 3 Countries:
                            1   =   x (%)
                            2   =   x (%)
                            3   =   x (%)
                        */
                        var stats = new Array();
                        var regArr = checkRegion(regName);
                        //alert(regArr);
                        var regIndex = checkRegion_Num(regName);
                        stats = doStats(regArr,regIndex);
                    
                        var regStats = new Array();
                        regStats[0] = region[0][year-2001];
                        regStats[1] = region[regIndex][year-2001]; 
                    
                        var percent = parseInt((regStats[1]/regStats[0])*100);
                        var string;
                        string = '<br><br>Overall Statistics:<br><b>' + percent + '%</b> Of All Persons In <b>'+ year +'</b><br>';
                        string += 'Top 3 most populous countries in: ' + regName + ' <br>';
                        string += '1st: <b>'+ stats[0][0] + '</b> '+ stats[2][1]+'<br>';
                        string += '2nd: <b>'+ stats[1][0] + '</b> '+ stats[1][1]+'<br>';
                        string += '3rd: <b>'+ stats[2][0] + '</b> '+ stats[0][1]+'<br>';
                        
                        return string;
                    }
                    
                    function checkRegion_Num(regName){
                        var ret = new Array();
                        if(regName == 'Africa'){
                            ret = 1;
                        }else if(regName == 'Asia'){
                            ret = 2;
                        }else if(regName == 'Europe'){
                            ret = 3;
                        }else if(regName == 'North America'){
                            ret = 4;
                        }else if(regName == 'Oceania'){
                            ret = 5;
                        }else if(regName == 'South America'){
                            ret = 6;
                        }
                        return ret;
                    }
                    function checkRegion(regName){
                        var ret = new Array();
                        if(regName == 'Africa'){
                            ret = africanRegions;
                        }else if(regName == 'Asia'){
                            ret = asianRegions;
                        }else if(regName == 'Europe'){
                            ret =  europeanRegions;
                        }else if(regName == 'North America'){
                            ret =  nAmericanRegions;
                        }else if(regName == 'Oceania'){
                            ret =  oceaniaRegions;
                        }else if(regName == 'South America'){
                            ret =  sAmericaRegions;
                        }
                        return ret;
                    }
                </script>
		<script type="text/javascript">
                    $(function () {
                        var chart;
                        $(document).ready(function () {
                
                            var colors = Highcharts.getOptions().colors,
                            categories = ['Africa', 'Asia', 'Europe', 'North America', 'Oceania', 'South America', 'Unknown'],
                            name1 = 'Actual';
                
                            function setChart(name, categories, data, color) {
                                console.log(name[i], categories, data, color);
                                chart.xAxis[0].options.labels = {rotation: -45, align: 'right'};
                                chart.xAxis[0].setCategories(categories);
                                while (chart.series.length > 0) {
                                    chart.series[0].remove(true);
                                }
                                for (var i = 0; i < data.length; i++) {
                                    chart.addSeries({
                                        name: name[i],
                                        data: data[i],
                                        color: colors[i+1]
                                    });
                                }
                            }
                            chart = new Highcharts.Chart({
                                chart: {
                                    renderTo: 'con1',
                                    type: 'column'
                                },
                                title: {
                                    text: 'Persons Obtaining Permanent Resident Status'
                                },
                                subtitle: {
                                    text: 'Hover over a column to view specific data and statistics.'
                                },  credits: {
                                    enabled: false
                                 },
                                xAxis: {
                                    categories: categories
                                    , labels: {align:'center'}
                                },
                                yAxis: {
                                    title: {
                                        text: 'Number of People'
                                    }
                                },
                                tooltip: {
                                    formatter: function () {
                                        var point = this.point,
                                        series = point.series,
                                        s = '<b>' + this.x + ' ' + series.name + '</b>: <b>' + this.y + '</b> people<br/>';
                                        if (point.drilldown) {
                                            //s += 'Click to view <b>' + point.category + ' ' + series.name + ' </b>' + ' by department';
                                        } else {
                                            s += showStats(this.x, series.name);
                                           
                                        }
                                        return s;
                                    }
                                },
                
                                series: [{
                                    name: '2001',
                                    data: getDataByYear(2001, region),
                                    color: colors[0]
                                },{
                                    name: '2002',
                                    data: getDataByYear(2002, region),
                                    color: colors[1]
                                },{
                                    name: '2003',
                                    data: getDataByYear(2003, region),
                                    color: colors[2]
                                },{
                                    name: '2004',
                                    data: getDataByYear(2004, region),
                                    color: colors[3]
                                },{
                                    name: '2005',
                                    data: getDataByYear(2005, region),
                                    color: colors[4]
                                },{
                                    name: '2006',
                                    data: getDataByYear(2006, region),
                                    color: colors[5]
                                },{
                                    name: '2007',
                                    data: getDataByYear(2007, region),
                                    color: colors[6]
                                },{
                                    name: '2008',
                                    data: getDataByYear(2008, region),
                                    color: colors[7]
                                },{
                                    name: '2009',
                                    data: getDataByYear(2009, region),
                                    color: colors[8]
                                }],
                
                                exporting: {
                                    enabled: true
                                }
                            });
                        });
                    });
                </script>
	</head>